<html>

<head>
  <title>FIREBASE CLOUD FIRESTORE</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
</head>

<body>
  <div class="container">
    <br>
    <div class="row">
      <div class="col">
        Age <input id="age" type="number" class="form-control" placeholder="years" required></input><br><br>
      </div>
      <div class="col">
        Height <input id="height" type="number" class="form-control" placeholder="cm" required></input><br><br>
      </div>
      <div class="col">
        Weight <input id="weight" type="number" class="form-control" placeholder="kg" required></input><br><br>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <button onclick="computeBMI()" id="computeBMI" class="btn btn-lg btn-primary btn-block text-uppercase">Compute
          BMI</button>
      </div>
    </div>
    <br>
    <div class="row">
      <div class="col">
        Your BMI : <span id="measure"></span><br>
        Ideal Weight : <span id="idealWeight"></span><br>
        Calories : <span id="calories"></span><br>
        <hr>
      </div>
    </div>
    <div class="row">
      <div class="col">
        Carbohydrate : <span id="carbohydrates"></span><br>
        Protein : <span id="protein"></span><br>
        Fat : <span id="fat"></span><br>
      </div>
    </div>
    <br>
    <div class="row">
      <table id="food-list" class="table table-hover nowrap table-sm">
        <thead>
          <tr>
            <th colspan="2">FOOD</th>
            <th>MEASURE/S</th>
            <th>CARBOHYDRATES (grams)</th>
            <th>PROTEIN (grams)</th>
            <th>FAT (grams)</th>
            <th>ENERGY (calories)</th>
            <th>Action</th>
          </tr>
        </thead>
      </table>
    </div>
  </div>
  <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-firestore.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</body>

<script id="MainScript">
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyAqXuVYulfjVRD-8riTWDEd5PD8Nch_x2M",
    authDomain: "health-fooducate.firebaseapp.com",
    projectId: "health-fooducate",
    storageBucket: "health-fooducate.appspot.com",
    messagingSenderId: "698437255481",
    appId: "1:698437255481:web:2ef891d2deeed5c6fde8e8",
    measurementId: "G-Y5SDV2F5VD"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  //firebase.analytics();

  db = firebase.firestore();
  var collection = db.collection("foodlist")

  var carbohydrates, protein, fat, carVegetableArow2, proteinVegetableArow2, proteinMilkWhole, fatMilkWhole, carMilkWhole, carRice, proteinRice, carVegetableB, proteinVegetableB, proteinMilkSkimmed, fatMilkSkimmed, carMilkSkimmed, carMilkLowFat, proteinMilkLowFat, fatMilkLowFat, proteinLowFat, proteinMediumFat, proteinHighFat, carSugar, carVegetableA, carVegetableB, carFruit, fatFat, fatLowFatMeat, fatMediumFatMeat, fatHighFatMeat;

  function computeBMI() {
    var height = document.getElementById('height').value;
    var years = document.getElementById('age').value;
    var kg = document.getElementById('weight').value;
    var heightToCm = document.getElementById('height').value / 100;
    var m2 = heightToCm * heightToCm;
    var bmi = kg / m2; //result of bmi
    // console.log('kg ' + kg + ' m2 ' + m2);

    //Tanhauser's Formula for Desirable Body Weight
    var heightInCm = parseInt(document.getElementById('height').value) - 100; //(height in cm - 100)
    var heightInCmKg = heightInCm * 0.10; //(height in cm - 100) * 10%
    var dbw = heightInCm - heightInCmKg;
    document.getElementById('idealWeight').innerHTML = dbw.toFixed(2);
    // console.log(heightInCm + ' ' + heightInCmKg + ' ' + dbw);

    switch (true) {
      case bmi < 16:
        var kcal = newdbw * 35;
        console.log('Very Severly Underweight, ' + 'new dbw ' + newdbw + ' ' + ' kcal ' + kcal);
        document.getElementById('measure').innerHTML = bmi.toFixed(1);
        document.getElementById('calories').innerHTML = kcal.toFixed(2);
        break;

      case bmi == 16 || bmi <= 17:
        var newdbw = dbw * 0.10;
        var kcal = newdbw * 35;
        console.log('Severly Underweight, ' + 'new dbw ' + newdbw + ' ' + ' kcal ' + kcal);
        document.getElementById('measure').innerHTML = bmi.toFixed(1);
        document.getElementById('calories').innerHTML = kcal.toFixed(2);
        break;

      case bmi <= 17 || bmi <= 18.5:
        var newdbw = dbw * 0.10;
        var kcal = newdbw * 35;
        console.log('Underweight, ' + 'new dbw ' + newdbw + ' ' + ' kcal ' + kcal);
        document.getElementById('measure').innerHTML = bmi.toFixed(1);
        document.getElementById('calories').innerHTML = kcal.toFixed(2);
        break;

      case bmi <= 18.5 || bmi <= 24.9:
        var newdbw = dbw; //as is dbw
        var kcal = newdbw * 30;
        console.log('Normal, ' + 'new dbw ' + newdbw + ' ' + ' kcal ' + kcal);
        document.getElementById('measure').innerHTML = bmi.toFixed(1);
        document.getElementById('calories').innerHTML = kcal.toFixed(2);
        break;

      case bmi <= 25 || bmi <= 29.9:
        var newdbw = dbw + ((dbw * 0.10) * -1);
        var kcal = newdbw * 25;
        console.log('Overweight, ' + 'new dbw ' + newdbw + ' ' + ' kcal ' + kcal);
        document.getElementById('measure').innerHTML = bmi.toFixed(1);
        document.getElementById('calories').innerHTML = kcal.toFixed(2);
        break;

      case bmi > 30:
        var newdbw = dbw + ((dbw * 0.10) * -1);
        var kcal = newdbw * 25;
        console.log('Obesity, ' + 'new dbw ' + newdbw + ' ' + ' kcal ' + kcal);
        document.getElementById('measure').innerHTML = bmi.toFixed(1);
        document.getElementById('calories').innerHTML = kcal.toFixed(2);
        break;

      default:
        text = "can't compute";

    }

    carbohydrates = (kcal * 0.6) / 4;
    proteins = (kcal * 0.15) / 4;
    fats = (kcal * 0.25) / 9;


    //Carbohydrates Result
    carVegetableA = carbohydrates * 0.15;
    carVegetableB = carbohydrates * 0.15;
    carFruit = carbohydrates * 0.10;

    //Carbohyrdrates for Milk List
    carMilkWhole = (carbohydrates * 0.05) / 3;
    carMilkLowFat = (carbohydrates * 0.05) / 3;
    carMilkSkimmed = (carbohydrates * 0.05) / 3;

    //Carbohydrates for Vegetable A row 2
    carVegetableArow2 = carbohydrates * 0.15

    //Carbohydrates for Vegetable B
    carVegetableB = carbohydrates * 0.15

    carRice = carbohydrates * 0.50;
    carSugar = carbohydrates * 0.05;

    //Protein Result for Vegetable A row 2
    proteinVegetableArow2 = proteins * 0.05;

    //Protein Result for Vegetable B
    proteinVegetableB = proteins * 0.05;

    //Protein Result for Meat
    proteinLowFat = (proteins * 0.8) / 3;
    proteinMediumFat = (proteins * 0.8) / 3;
    proteinHighFat = (proteins * 0.8) / 3;
    proteinRice = proteins * 0.1;

    // Protein Result for Milk
    proteinMilkWhole = (proteins * 0.25) / 3;
    proteinMilkLowFat = (proteins * 0.25) / 3;
    proteinMilkSkimmed = (proteins * 0.25) / 3;

    //Fat Result for Fat
    fatFat = fats * 0.50;
    fatLowFatMeat = (fats * 0.25) / 3;
    fatMediumFatMeat = (fats * 0.25) / 3;
    fatHighFatMeat = (fats * 0.25) / 3;

    //Fat Result fo Milk
    fatMilkWhole = (fats * 0.25) / 3;
    fatMilkLowFat = (fats * 0.25) / 3;
    fatMilkSkimmed = (fats * 0.25) / 3;

    console.log('carbohydrates :' + carbohydrates + ' protein :' + proteins + ' fat :' + fats);
    document.getElementById('carbohydrates').innerHTML = carbohydrates.toFixed(2);
    document.getElementById('protein').innerHTML = proteins.toFixed(2);
    document.getElementById('fat').innerHTML = fats.toFixed(2);

    //remove all row exept header
    var table = document.getElementById("food-list");
    for (var i = table.rows.length - 1; i > 0; i--) {
      table.deleteRow(i);
    }

    collection
      .where('name', '==', 'Vegetable')
      .where('nameCategory', '==', 'Group A')
      .get()
      .then(function (querySnapshot) {
        var vegetableArow1Array = []
        querySnapshot.forEach(function (doc) {
          vegetableArow1Array.push(doc.data());
        });
        let randomVegetableA1 = Math.floor(Math.random() * vegetableArow1Array.length);
        renderVegetableArow1(vegetableArow1Array[randomVegetableA1]);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });

    collection
      .where('name', '==', 'Vegetable')
      .where('nameCategory', '==', 'Group A')
      .get()
      .then(function (querySnapshot) {
        var vegetableArow2Array = []
        querySnapshot.forEach(function (doc) {
          vegetableArow2Array.push(doc.data());
        });
        let randomVegetableA2 = Math.floor(Math.random() * vegetableArow2Array.length);
        renderVegetableArow2(vegetableArow2Array[randomVegetableA2], carVegetableArow2, proteinVegetableArow2);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });

    collection
      .where('name', '==', 'Vegetable')
      .where('nameCategory', '==', 'Group B')
      .get()
      .then(function (querySnapshot) {
        var vegetableBArray = []
        querySnapshot.forEach(function (doc) {
          vegetableBArray.push(doc.data());
        });
        let randomVegetableB = Math.floor(Math.random() * vegetableBArray.length);
        renderVegetableB(vegetableBArray[randomVegetableB], carVegetableB, proteinVegetableB);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });

    collection
      .where('name', '==', 'Fruit')
      .where('ediblePortion', '<=', carFruit + 5)
      .where('ediblePortion', '>=', (carFruit - 5))
      .get()
      .then(function (querySnapshot) {
        var fruitarray = []
        querySnapshot.forEach(function (doc) {
          fruitarray.push(doc.data());
        });
        let randomfruit = Math.floor(Math.random() * fruitarray.length);
        renderFruit(fruitarray[randomfruit]);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });

    collection
      .where('name', '==', 'Milk')
      .where('nameCategory', '==', 'Whole milk')
      .where('ediblePortion', '<=', carMilkWhole + 50)
      .where('ediblePortion', '>=', (carMilkWhole - 50))
      .get()
      .then(function (querySnapshot) {
        var wholemilkarray = []
        querySnapshot.forEach(function (doc) {
          wholemilkarray.push(doc.data());
        });
        let randomwholemilk = Math.floor(Math.random() * wholemilkarray.length);
        renderWholeMilk(wholemilkarray[randomwholemilk], proteinMilkWhole, fatMilkWhole);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });

    collection
      .where('name', '==', 'Milk')
      .where('nameCategory', '==', 'Skimmed (non-fat)')
      .where('ediblePortion', '<=', carMilkSkimmed + 5)
      .where('ediblePortion', '>=', (carMilkSkimmed - 5))
      .get()
      .then(function (querySnapshot) {
        var skimmedmilkarray = []
        querySnapshot.forEach(function (doc) {
          skimmedmilkarray.push(doc.data());
        });
        let randomskimmedmilk = Math.floor(Math.random() * skimmedmilkarray.length);
        renderSkimmedMilk(skimmedmilkarray[randomskimmedmilk], proteinMilkSkimmed, fatMilkSkimmed);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });

    collection
      .where('name', '==', 'Milk')
      .where('nameCategory', '==', 'Low fat Milk')
      .where('ediblePortion', '<=', carMilkLowFat + 5)
      .where('ediblePortion', '>=', (carMilkLowFat - 5))
      .get().then((snapshot) => {
        var lowfatmilkarray = []
        snapshot.docs.forEach(doc => {
          lowfatmilkarray.push(doc.data());
        });
        let randomlowfatmilk = Math.floor(Math.random() * lowfatmilkarray.length);
        renderLowFat(lowfatmilkarray[randomlowfatmilk], proteinMilkLowFat, fatMilkLowFat);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });

    collection
      .where('name', '==', 'Rice')
      .where('ediblePortion', '<=', carRice + 5)
      .where('ediblePortion', '>=', (carRice - 5))
      .get().then((snapshot) => {
        var ricearray = []
        snapshot.docs.forEach(doc => {
          ricearray.push(doc.data());
        });
        let randomrice = Math.floor(Math.random() * ricearray.length);
        renderRice(ricearray[randomrice], proteinRice);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });

    collection
      .where('name', '==', 'Meat')
      .where('nameCategory', '==', 'Low Fat')
      .where('ediblePortion', '<=', fats + 5)
      .where('ediblePortion', '>=', (fats - 5))
      .get().then((snapshot) => {
        var meatlowfatarray = []
        snapshot.docs.forEach(doc => {
          meatlowfatarray.push(doc.data());
        });
        let randomlowfat = Math.floor(Math.random() * meatlowfatarray.length);
        renderMeatLowFat(meatlowfatarray[randomlowfat], proteinLowFat);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });

    collection
      .where('name', '==', 'Meat')
      .where('nameCategory', '==', 'Medium Fat')
      .where('ediblePortion', '<=', fats + 5)
      .where('ediblePortion', '>=', (fats - 5))
      .get().then((snapshot) => {
        var meatmediumfat = []
        snapshot.docs.forEach(doc => {
          meatmediumfat.push(doc.data());
        });
        let randommediumfat = Math.floor(Math.random() * meatmediumfat.length);
        renderMeatMediumFat(meatmediumfat[randommediumfat], proteinMediumFat);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });

    collection
      .where('name', '==', 'Meat')
      .where('nameCategory', '==', 'High Fat')
      .where('ediblePortion', '<=', fats + 5)
      .where('ediblePortion', '>=', (fats - 5))
      .get().then((snapshot) => {
        var meathighfatarray = []
        snapshot.docs.forEach(doc => {
          meathighfatarray.push(doc.data());
        });
        let randommediumhighfat = Math.floor(Math.random() * meathighfatarray.length);
        renderMeatHighFat(meathighfatarray[randommediumhighfat], proteinHighFat);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });

    collection
      .where('name', '==', 'Fat')
      .where('ediblePortion', '<=', fatFat + 5)
      .where('ediblePortion', '>=', (fatFat - 5))
      .get().then((snapshot) => {
        var fatarray = []
        snapshot.docs.forEach(doc => {
          fatarray.push(doc.data())
        });
        let randomfat = Math.floor(Math.random() * fatarray.length);
        renderFatList(fatarray[randomfat]);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });

    collection
      .where('name', '==', 'Sugar')
      .where('ediblePortion', '<=', carSugar + 5)
      .where('ediblePortion', '>=', (carSugar - 5))
      .get().then((snapshot) => {
        var sugararray = []
        snapshot.docs.forEach(doc => {
          sugararray.push(doc.data());
        });
        let randomsugar = Math.floor(Math.random() * sugararray.length);
        renderSugar(sugararray[randomsugar]);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });
  }



  const foodlist = document.querySelector("#food-list");
  var table = document.getElementById("food-list");

  function vegA1() {
    collection
      .where('name', '==', 'Vegetable')
      .where('nameCategory', '==', 'Group A')
      .get()
      .then(function (querySnapshot) {
        var vegetableArow1Array = []
        querySnapshot.forEach(function (doc) {
          vegetableArow1Array.push(doc.data());
        });
        let randomVegetableA1 = Math.floor(Math.random() * vegetableArow1Array.length);
        $('#food-list tr[data-id="' + 1 + '"]').remove();
        renderVegetableArow1(vegetableArow1Array[randomVegetableA1]);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });
  }

  function vegA2() {
    collection
      .where('name', '==', 'Vegetable')
      .where('nameCategory', '==', 'Group A')
      .get()
      .then(function (querySnapshot) {
        var vegetableArow2Array = []
        querySnapshot.forEach(function (doc) {
          vegetableArow2Array.push(doc.data());
        });
        let randomVegetableA2 = Math.floor(Math.random() * vegetableArow2Array.length);
        $('#food-list tr[data-id="' + 2 + '"]').remove();
        renderVegetableArow2(vegetableArow2Array[randomVegetableA2], carVegetableArow2, proteinVegetableArow2);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });
  }

  function vegB() {
    collection
      .where('name', '==', 'Vegetable')
      .where('nameCategory', '==', 'Group B')
      .get()
      .then(function (querySnapshot) {
        var vegetableBArray = []
        querySnapshot.forEach(function (doc) {
          vegetableBArray.push(doc.data());
        });
        let randomVegetableB = Math.floor(Math.random() * vegetableBArray.length);
        $('#food-list tr[data-id="' + 3 + '"]').remove();
        renderVegetableB(vegetableBArray[randomVegetableB], carVegetableB, proteinVegetableB);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });
  }

  function fruit() {
    collection
      .where('name', '==', 'Fruit')
      .where('ediblePortion', '<=', carFruit + 5)
      .where('ediblePortion', '>=', (carFruit - 5))
      .get()
      .then(function (querySnapshot) {
        var fruitarray = []
        querySnapshot.forEach(function (doc) {
          fruitarray.push(doc.data());
        });
        let randomfruit = Math.floor(Math.random() * fruitarray.length);
        $('#food-list tr[data-id="' + 4 + '"]').remove();
        renderFruit(fruitarray[randomfruit]);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });
  }

  function wholeMilk() {
    collection
      .where('name', '==', 'Milk')
      .where('nameCategory', '==', 'Whole milk')
      .where('ediblePortion', '<=', carMilkWhole + 50)
      .where('ediblePortion', '>=', (carMilkWhole - 50))
      .get()
      .then(function (querySnapshot) {
        var wholemilkarray = []
        querySnapshot.forEach(function (doc) {
          wholemilkarray.push(doc.data());
        });
        let randomwholemilk = Math.floor(Math.random() * wholemilkarray.length);
        $('#food-list tr[data-id="' + 5 + '"]').remove();
        renderWholeMilk(wholemilkarray[randomwholemilk], proteinMilkWhole, fatMilkWhole);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });
  }

  function skimmedMilk() {
    collection
      .where('name', '==', 'Milk')
      .where('nameCategory', '==', 'Skimmed (non-fat)')
      .where('ediblePortion', '<=', carMilkSkimmed + 5)
      .where('ediblePortion', '>=', (carMilkSkimmed - 5))
      .get()
      .then(function (querySnapshot) {
        var skimmedmilkarray = []
        querySnapshot.forEach(function (doc) {
          skimmedmilkarray.push(doc.data());
        });
        let randomskimmedmilk = Math.floor(Math.random() * skimmedmilkarray.length);
        $('#food-list tr[data-id="' + 6 + '"]').remove();
        renderSkimmedMilk(skimmedmilkarray[randomskimmedmilk], proteinMilkSkimmed, fatMilkSkimmed);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });
  }

  function lowFat() {
    collection
      .where('name', '==', 'Milk')
      .where('nameCategory', '==', 'Low fat Milk')
      .where('ediblePortion', '<=', carMilkLowFat + 5)
      .where('ediblePortion', '>=', (carMilkLowFat - 5))
      .get().then((snapshot) => {
        var lowfatmilkarray = []
        snapshot.docs.forEach(doc => {
          lowfatmilkarray.push(doc.data());
        });
        let randomlowfatmilk = Math.floor(Math.random() * lowfatmilkarray.length);
        $('#food-list tr[data-id="' + 7 + '"]').remove();
        renderLowFat(lowfatmilkarray[randomlowfatmilk], proteinMilkLowFat, fatMilkLowFat);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });
  }

  function rice() {
    collection
      .where('name', '==', 'Rice')
      .where('ediblePortion', '<=', carRice + 5)
      .where('ediblePortion', '>=', (carRice - 5))
      .get().then((snapshot) => {
        var ricearray = []
        snapshot.docs.forEach(doc => {
          ricearray.push(doc.data());
        });
        let randomrice = Math.floor(Math.random() * ricearray.length);
        $('#food-list tr[data-id="' + 8 + '"]').remove();
        renderRice(ricearray[randomrice], proteinRice);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });
  }

  function meatLowFat() {
    collection
      .where('name', '==', 'Meat')
      .where('nameCategory', '==', 'Low Fat')
      .where('ediblePortion', '<=', fats + 5)
      .where('ediblePortion', '>=', (fats - 5))
      .get().then((snapshot) => {
        var meatlowfatarray = []
        snapshot.docs.forEach(doc => {
          meatlowfatarray.push(doc.data());
        });
        let randomlowfat = Math.floor(Math.random() * meatlowfatarray.length);
        $('#food-list tr[data-id="' + 9 + '"]').remove();
        renderMeatLowFat(meatlowfatarray[randomlowfat], proteinLowFat);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });
  }

  function meatMediumFat() {
    collection
      .where('name', '==', 'Meat')
      .where('nameCategory', '==', 'Medium Fat')
      .where('ediblePortion', '<=', fats + 5)
      .where('ediblePortion', '>=', (fats - 5))
      .get().then((snapshot) => {
        var meatmediumfat = []
        snapshot.docs.forEach(doc => {
          meatmediumfat.push(doc.data());
        });
        let randommediumfat = Math.floor(Math.random() * meatmediumfat.length);
        $('#food-list tr[data-id="' + 10 + '"]').remove();
        renderMeatMediumFat(meatmediumfat[randommediumfat], proteinMediumFat);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });
  }

  function meatHighFat() {
    collection
      .where('name', '==', 'Meat')
      .where('nameCategory', '==', 'High Fat')
      .where('ediblePortion', '<=', fats + 5)
      .where('ediblePortion', '>=', (fats - 5))
      .get().then((snapshot) => {
        var meathighfatarray = []
        snapshot.docs.forEach(doc => {
          meathighfatarray.push(doc.data());
        });
        let randommediumhighfat = Math.floor(Math.random() * meathighfatarray.length);
        $('#food-list tr[data-id="' + 11 + '"]').remove();
        renderMeatHighFat(meathighfatarray[randommediumhighfat], proteinHighFat);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });
  }

  function fatList() {
    collection
      .where('name', '==', 'Fat')
      .where('ediblePortion', '<=', fatFat + 5)
      .where('ediblePortion', '>=', (fatFat - 5))
      .get().then((snapshot) => {
        var fatarray = []
        snapshot.docs.forEach(doc => {
          fatarray.push(doc.data())
        });
        let randomfat = Math.floor(Math.random() * fatarray.length);
        $('#food-list tr[data-id="' + 12 + '"]').remove();
        renderFatList(fatarray[randomfat]);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });
  }

  function sugar() {
    collection
      .where('name', '==', 'Sugar')
      .where('ediblePortion', '<=', carSugar + 5)
      .where('ediblePortion', '>=', (carSugar - 5))
      .get().then((snapshot) => {
        var sugararray = []
        snapshot.docs.forEach(doc => {
          sugararray.push(doc.data());
        });
        let randomsugar = Math.floor(Math.random() * sugararray.length);
        $('#food-list tr[data-id="' + 13 + '"]').remove();
        renderSugar(sugararray[randomsugar]);
      })
      .catch(function (error) {
        console.error("Error getting documents: ", error);
      });
  }
  function renderVegetableArow1(doc) {

    let button = document.createElement('BUTTON');
    let onclick = button.getAttribute("onclick");
    button.setAttribute("id", "vegA1");
    button.setAttribute("onclick", "vegA1();");
    button.innerHTML = "Change";
    button.style.textAlign = "center";
    button.className = "btn btn-sm btn-primary btn-block";

    let tr = document.createElement('tr');
    let namecategory = document.createElement('td');
    let food = document.createElement('td');
    let measure = document.createElement('td');
    let carbohydrates = document.createElement('td');
    let protein = document.createElement('td');
    let fat = document.createElement('td');
    let calories = document.createElement('td');

    tr.setAttribute('data-id', 1);
    namecategory.textContent = 'Vegetable A';
    food.textContent = doc.food;
    measure.textContent = doc.measure;
    carbohydrates.textContent = '-';
    protein.textContent = '-';
    fat.textContent = '-';
    calories.textContent = '-';

    tr.append(namecategory);
    tr.append(food);
    tr.append(measure);
    tr.append(carbohydrates);
    tr.append(protein);
    tr.append(fat);
    tr.append(calories);
    tr.append(button);
    foodlist.appendChild(tr);
  }

  function renderVegetableArow2(doc, carVegetableArow2, proteinVegetableArow2) {
    let button = document.createElement('BUTTON');
    let onclick = button.getAttribute("onclick");
    button.setAttribute("id", "vegA2");
    button.setAttribute("onclick", "vegA2();");
    button.innerHTML = "Change";
    button.style.textAlign = "center";
    button.className = "btn btn-sm btn-primary btn-block";

    let tr = document.createElement('tr');
    let namecategory = document.createElement('td');
    let food = document.createElement('td');
    let measure = document.createElement('td');
    let carbohydrates = document.createElement('td');
    let protein = document.createElement('td');
    let fat = document.createElement('td');
    let calories = document.createElement('td');

    tr.setAttribute('data-id', 2);
    namecategory.textContent = 'Vegetable A';
    food.textContent = doc.food;
    measure.textContent = doc.measure;
    carbohydrates.textContent = Math.round(carVegetableArow2);
    protein.textContent = Math.round(proteinVegetableArow2);
    fat.textContent = '-';
    calories.textContent = '-';

    tr.append(namecategory);
    tr.append(food);
    tr.append(measure);
    tr.append(carbohydrates);
    tr.append(protein);
    tr.append(fat);
    tr.append(calories);
    tr.append(button);
    foodlist.appendChild(tr);
  }

  function renderVegetableB(doc, carVegetableB, proteinVegetableB) {
    let button = document.createElement('BUTTON');
    let onclick = button.getAttribute("onclick");
    button.setAttribute("id", "vegB");
    button.setAttribute("onclick", "vegB();");
    button.innerHTML = "Change";
    button.style.textAlign = "center";
    button.className = "btn btn-sm btn-primary btn-block";

    let tr = document.createElement('tr');
    let namecategory = document.createElement('td');
    let food = document.createElement('td');
    let measure = document.createElement('td');
    let carbohydrates = document.createElement('td');
    let protein = document.createElement('td');
    let fat = document.createElement('td');
    let calories = document.createElement('td');

    tr.setAttribute('data-id', 3);
    namecategory.textContent = 'Vegetable B';
    food.textContent = doc.food;
    measure.textContent = doc.measure;
    carbohydrates.textContent = Math.round(carVegetableB);
    protein.textContent = Math.round(proteinVegetableB);
    fat.textContent = '-';
    calories.textContent = Math.round((Math.round(carVegetableB) * 4) + (Math.round(proteinVegetableB) * 4));


    tr.append(namecategory);
    tr.append(food);
    tr.append(measure);
    tr.append(carbohydrates);
    tr.append(protein);
    tr.append(fat);
    tr.append(calories);
    tr.append(button);
    foodlist.appendChild(tr);
  }

  function renderFruit(doc) {
    let button = document.createElement('BUTTON');
    let onclick = button.getAttribute("onclick");
    button.setAttribute("id", "fruit");
    button.setAttribute("onclick", "fruit();");
    button.innerHTML = "Change";
    button.style.textAlign = "center";
    button.className = "btn btn-sm btn-primary btn-block";

    let tr = document.createElement('tr');
    let namecategory = document.createElement('td');
    let food = document.createElement('td');
    let measure = document.createElement('td');
    let carbohydrates = document.createElement('td');
    let protein = document.createElement('td');
    let fat = document.createElement('td');
    let calories = document.createElement('td');

    tr.setAttribute('data-id', 4);
    namecategory.textContent = 'Fruit';
    food.textContent = doc.food;
    measure.textContent = doc.measure;
    carbohydrates.textContent = doc.ediblePortion;
    protein.textContent = '-';
    fat.textContent = '-';
    calories.textContent = doc.ediblePortion * 4;

    tr.append(namecategory);
    tr.append(food);
    tr.append(measure);
    tr.append(carbohydrates);
    tr.append(protein);
    tr.append(fat);
    tr.append(calories);
    tr.append(button);
    foodlist.appendChild(tr);
  }

  function renderWholeMilk(doc, proteinMilkWhole, fatMilkWhole) {
    let button = document.createElement('BUTTON');
    let onclick = button.getAttribute("onclick");
    button.setAttribute("id", "wholeMilk");
    button.setAttribute("onclick", "wholeMilk();");
    button.innerHTML = "Change";
    button.style.textAlign = "center";
    button.className = "btn btn-sm btn-primary btn-block";

    let tr = document.createElement('tr');
    let namecategory = document.createElement('td');
    let food = document.createElement('td');
    let measure = document.createElement('td');
    let carbohydrates = document.createElement('td');
    let protein = document.createElement('td');
    let fat = document.createElement('td');
    let calories = document.createElement('td');

    tr.setAttribute('data-id', 5);
    namecategory.textContent = 'Whole Milk';
    food.textContent = doc.food;
    measure.textContent = doc.measure;
    carbohydrates.textContent = doc.ediblePortion;
    protein.textContent = Math.round(proteinMilkWhole);
    fat.textContent = Math.round(fatMilkWhole);
    calories.textContent = doc.ediblePortion * 4;


    tr.append(namecategory);
    tr.append(food);
    tr.append(measure);
    tr.append(carbohydrates);
    tr.append(protein);
    tr.append(fat);
    tr.append(calories);
    tr.append(button);
    foodlist.appendChild(tr);
  }

  function renderSkimmedMilk(doc, proteinMilkSkimmed, fatMilkSkimmed) {
    let button = document.createElement('BUTTON');
    let onclick = button.getAttribute("onclick");
    button.setAttribute("id", "skimmedMilk");
    button.setAttribute("onclick", "skimmedMilk();");
    button.innerHTML = "Change";
    button.style.textAlign = "center";
    button.className = "btn btn-sm btn-primary btn-block";

    let tr = document.createElement('tr');
    let namecategory = document.createElement('td');
    let food = document.createElement('td');
    let measure = document.createElement('td');
    let carbohydrates = document.createElement('td');
    let protein = document.createElement('td');
    let fat = document.createElement('td');
    let calories = document.createElement('td');

    tr.setAttribute('data-id', 6);
    namecategory.textContent = 'Skimmed Milk';
    food.textContent = doc.food;
    measure.textContent = doc.measure;
    carbohydrates.textContent = doc.ediblePortion;
    protein.textContent = Math.round(proteinMilkSkimmed);
    fat.textContent = Math.round(fatMilkSkimmed);
    calories.textContent = doc.ediblePortion * 4;


    tr.append(namecategory);
    tr.append(food);
    tr.append(measure);
    tr.append(carbohydrates);
    tr.append(protein);
    tr.append(fat);
    tr.append(calories);
    tr.append(button);
    foodlist.appendChild(tr);
  }

  function renderLowFat(doc, proteinMilkLowFat, fatMilkLowFat) {
    let button = document.createElement('BUTTON');
    let onclick = button.getAttribute("onclick");
    button.setAttribute("id", "lowFat");
    button.setAttribute("onclick", "lowFat();");
    button.innerHTML = "Change";
    button.style.textAlign = "center";
    button.className = "btn btn-sm btn-primary btn-block";

    let tr = document.createElement('tr');
    let namecategory = document.createElement('td');
    let food = document.createElement('td');
    let measure = document.createElement('td');
    let carbohydrates = document.createElement('td');
    let protein = document.createElement('td');
    let fat = document.createElement('td');
    let calories = document.createElement('td');

    tr.setAttribute('data-id', 7);
    namecategory.textContent = 'Low Fat';
    food.textContent = doc.food;
    measure.textContent = doc.measure;
    carbohydrates.textContent = doc.ediblePortion;
    protein.textContent = Math.round(proteinMilkLowFat);
    fat.textContent = Math.round(fatMilkLowFat);
    calories.textContent = doc.ediblePortion * 4;

    tr.append(namecategory);
    tr.append(food);
    tr.append(measure);
    tr.append(carbohydrates);
    tr.append(protein);
    tr.append(fat);
    tr.append(calories);
    tr.append(button);
    foodlist.appendChild(tr);
  }

  function renderRice(doc, proteinRice) {
    let button = document.createElement('BUTTON');
    let onclick = button.getAttribute("onclick");
    button.setAttribute("id", "rice");
    button.setAttribute("onclick", "rice();");
    button.innerHTML = "Change";
    button.style.textAlign = "center";
    button.className = "btn btn-sm btn-primary btn-block";

    let tr = document.createElement('tr');
    let namecategory = document.createElement('td');
    let food = document.createElement('td');
    let measure = document.createElement('td');
    let carbohydrates = document.createElement('td');
    let protein = document.createElement('td');
    let fat = document.createElement('td');
    let calories = document.createElement('td');

    tr.setAttribute('data-id', 8);
    namecategory.textContent = 'Rice';
    food.textContent = doc.food;
    measure.textContent = doc.measure;
    carbohydrates.textContent = doc.ediblePortion;
    protein.textContent = Math.round(proteinRice);
    fat.textContent = '-';
    calories.textContent = doc.ediblePortion * 4;

    tr.append(namecategory);
    tr.append(food);
    tr.append(measure);
    tr.append(carbohydrates);
    tr.append(protein);
    tr.append(fat);
    tr.append(calories);
    tr.append(button);
    foodlist.appendChild(tr);
  }

  function renderMeatLowFat(doc, proteinLowFat) {
    let button = document.createElement('BUTTON');
    let onclick = button.getAttribute("onclick");
    button.setAttribute("id", "meatLowFat");
    button.setAttribute("onclick", "meatLowFat();");
    button.innerHTML = "Change";
    button.style.textAlign = "center";
    button.className = "btn btn-sm btn-primary btn-block";

    let tr = document.createElement('tr');
    let namecategory = document.createElement('td');
    let food = document.createElement('td');
    let measure = document.createElement('td');
    let carbohydrates = document.createElement('td');
    let protein = document.createElement('td');
    let fat = document.createElement('td');
    let calories = document.createElement('td');

    tr.setAttribute('data-id', 9);
    namecategory.textContent = 'Low Fat Meat';
    food.textContent = doc.food;
    measure.textContent = doc.measure;
    carbohydrates.textContent = '-';
    protein.textContent = Math.round(proteinLowFat);
    fat.textContent = Math.round((doc.ediblePortion * 0.25) / 3);
    calories.textContent = 41;

    tr.append(namecategory);
    tr.append(food);
    tr.append(measure);
    tr.append(carbohydrates);
    tr.append(protein);
    tr.append(fat);
    tr.append(calories);
    tr.append(button);
    foodlist.appendChild(tr);
  }

  function renderMeatMediumFat(doc, proteinMediumFat) {
    let button = document.createElement('BUTTON');
    let onclick = button.getAttribute("onclick");
    button.setAttribute("id", "meatMediumFat");
    button.setAttribute("onclick", "meatMediumFat();");
    button.innerHTML = "Change";
    button.style.textAlign = "center";
    button.className = "btn btn-sm btn-primary btn-block";

    let tr = document.createElement('tr');
    let namecategory = document.createElement('td');
    let food = document.createElement('td');
    let measure = document.createElement('td');
    let carbohydrates = document.createElement('td');
    let protein = document.createElement('td');
    let fat = document.createElement('td');
    let calories = document.createElement('td');

    tr.setAttribute('data-id', 10);
    namecategory.textContent = 'Medium Fat Meat';
    food.textContent = doc.food;
    measure.textContent = doc.measure;
    carbohydrates.textContent = '-';
    protein.textContent = Math.round(proteinMediumFat);
    fat.textContent = Math.round((doc.ediblePortion * 0.25) / 3);;
    calories.textContent = 86;

    tr.append(namecategory);
    tr.append(food);
    tr.append(measure);
    tr.append(carbohydrates);
    tr.append(protein);
    tr.append(fat);
    tr.append(calories);
    tr.append(button);
    foodlist.appendChild(tr);
  }

  function renderMeatHighFat(doc, proteinHighFat) {
    let button = document.createElement('BUTTON');
    let onclick = button.getAttribute("onclick");
    button.setAttribute("id", "meatHighFat");
    button.setAttribute("onclick", "meatHighFat();");
    button.innerHTML = "Change";
    button.style.textAlign = "center";
    button.className = "btn btn-sm btn-primary btn-block";

    let tr = document.createElement('tr');
    let namecategory = document.createElement('td');
    let food = document.createElement('td');
    let measure = document.createElement('td');
    let carbohydrates = document.createElement('td');
    let protein = document.createElement('td');
    let fat = document.createElement('td');
    let calories = document.createElement('td');

    tr.setAttribute('data-id', 11);
    namecategory.textContent = 'High Fat Meat';
    food.textContent = doc.food;
    measure.textContent = doc.measure;
    carbohydrates.textContent = '-';
    protein.textContent = Math.round(proteinHighFat);
    fat.textContent = Math.round((doc.ediblePortion * 0.25) / 3);;
    calories.textContent = 122;

    tr.append(namecategory);
    tr.append(food);
    tr.append(measure);
    tr.append(carbohydrates);
    tr.append(protein);
    tr.append(fat);
    tr.append(calories);
    tr.append(button);
    foodlist.appendChild(tr);
  }

  function renderFatList(doc) {
    let button = document.createElement('BUTTON');
    let onclick = button.getAttribute("onclick");
    button.setAttribute("id", "fatList");
    button.setAttribute("onclick", "fatList();");
    button.innerHTML = "Change";
    button.style.textAlign = "center";
    button.className = "btn btn-sm btn-primary btn-block";

    let tr = document.createElement('tr');
    let namecategory = document.createElement('td');
    let food = document.createElement('td');
    let measure = document.createElement('td');
    let carbohydrates = document.createElement('td');
    let protein = document.createElement('td');
    let fat = document.createElement('td');
    let calories = document.createElement('td');

    tr.setAttribute('data-id', 12);
    namecategory.textContent = 'Fat';
    food.textContent = doc.food;
    measure.textContent = doc.measure;
    carbohydrates.textContent = '-';
    protein.textContent = '-';
    fat.textContent = doc.ediblePortion;
    calories.textContent = doc.ediblePortion * 9;

    tr.append(namecategory);
    tr.append(food);
    tr.append(measure);
    tr.append(carbohydrates);
    tr.append(protein);
    tr.append(fat);
    tr.append(calories);
    tr.append(button);
    foodlist.appendChild(tr);
  }

  function renderSugar(doc) {
    let button = document.createElement('BUTTON');
    let onclick = button.getAttribute("onclick");
    button.setAttribute("id", "sugar");
    button.setAttribute("onclick", "sugar();");
    button.innerHTML = "Change";
    button.style.textAlign = "center";
    button.className = "btn btn-sm btn-primary btn-block";

    let tr = document.createElement('tr');
    let namecategory = document.createElement('td');
    let food = document.createElement('td');
    let measure = document.createElement('td');
    let carbohydrates = document.createElement('td');
    let protein = document.createElement('td');
    let fat = document.createElement('td');
    let calories = document.createElement('td');

    tr.setAttribute('data-id', 13);
    namecategory.textContent = 'Sugar';
    food.textContent = doc.food;
    measure.textContent = doc.measure;
    carbohydrates.textContent = doc.ediblePortion;
    protein.textContent = '-';
    fat.textContent = '-';
    calories.textContent = doc.ediblePortion * 4;

    tr.append(namecategory);
    tr.append(food);
    tr.append(measure);
    tr.append(carbohydrates);
    tr.append(protein);
    tr.append(fat);
    tr.append(calories);
    tr.append(button);
    foodlist.appendChild(tr);
  }
</script>

</html>